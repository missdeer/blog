---
layout: post
title: "研究了几个widget工具"
categories:
- Software
---
<p>　　昨天心血来潮，装上了<a href="http://www.cfishsoft.com/">鱼鱼桌面秀</a>看了看，以前也是装过的，有乱码，现在经过几个版本的更新升级，软件名称也已经换过了，但是乱码问题还是没有解决，原来用Delphi开发的就这么郁闷啊！我用的是英文的XP，打了中文语言包，照理显示中文是没有问题了的，不过这个软件在安装路径中如果有中文的话，就不能正常启动。另外，界面上也不全是乱码，某些地方的中文还是能显示出来的。还有，装的2.1.1纯净版，运行非常不稳定，经常出错崩溃。如此看来，这个软件也就是界面上比较出色了。<br />　　说完了缺点，来看看它的技术特点。现在这个软件也算是一个widget工具了，可以有一个侧边栏，依靠在桌面的右侧，在该侧边栏上的可以安放一些widget，一般就是显示当前时间，当前CPU占用率，内存使用率，某个城市的天气情况等等，翻来翻去就是这么固定的几个内容，主要体现在界面上的设计有所不同。看了一下它的SDK，终于基本搞明白，原来是程序内部固定了只提供这些服务，外部每个widget有一个脚本文件，可以是vbs或js，调用程序提供的那些对象、方法，然后绘制界面。除了一个描述逻辑用的脚本文件外，widget还会有一个配置文件，记录一些最基本的信息，比如图片文件路径等。widget可以通过鼠标拖拽，拖到桌面上任意位置，也可以停放在侧边栏上。稍微想了一下，觉得这个应该不难实现，也就是侧边栏是一个单独的窗口，在拖拽widget的时候，检测当前widget的位置，如果进入侧边栏窗口区域，则自动调整widget的位置，看起来像是多个widget贴在侧边栏上一样，实际上还是各个窗口各自管理。如果拖出了侧边栏，则拖到哪算哪。后来看了一下窗口类信息，果然跟我猜想的一样，说起来我的LLYFSpy都不能正常使用了，抽时间也得好好整一下，就作为WIND的一个插件好了。<br />　　看完鱼鱼桌面秀，我又想起<a href="http://snda.csdn.net/sdo/index.aspx">盛大的widget</a>和<a href="http://widget.cn.yahoo.com/">雅虎的widget</a>，于是上它们的网站看了看。盛大的是能放到游戏中去的，这是一大特色，但目前似乎还不能放到桌面上。雅虎的看起来则要比鱼鱼的专业得多，widget能做的事也多一点，界面响应和交互能力也要强些。雅虎也是给每个widget一个配置文件，但是XML格式的，而且把逻辑处理的代码也放到这个配置文件里，说起来，单纯从用户角度讲，雅虎的方案更好一点，但如果能把一个widget的所有文件都打包的话，这个优点就不存在了。如果从widget开发者的角度讲，可能鱼鱼的方案稍微好一点点，因为不同的格式放在不同的文件中，用支持syntax highlight、auto-completion的编辑器来方便得多，现在还很少有编辑器能同时支持混合的语言。<br />　　看了这些之后，我就想，我是不是能把WallpaperHelper里的桌面时钟日历功能扩展一下，不就也有一个widget功能了嘛！看它们用来扩展的都是vbs或js，鱼鱼似乎是直接用的MS的那个WSH组件，这有一个很大的好处，直接用WSH的强大功能，它内置了不少接口，像FSO之类的，还可以直接调用ActiveX，实在强大！雅虎的倒是看到一个js32.dll，可能是mozilla的那个js引擎。盛大的没看。但是我现在对于要嵌入的脚本语言，只能Lua感兴趣，公司里也曾经有人讨论过对于嵌入的语言使用Lua好还是js好，当时我的观点是看应用场景，希望脚本做些什么事，再来分辨做这些事用哪种语言方便。</p>
